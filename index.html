<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ho-Ho-Kus Property Tax Calculator</title>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YTVYK6XE2S"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-YTVYK6XE2S');
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/style.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>Ho-Ho-Kus Tax Impact</h1>
            <p>Estimate your 2026 property tax and model the school budget vote.</p>
        </header>

        <main>
            <section class="search-section">
                <div class="input-wrapper">
                    <input type="text" id="addressInput" placeholder="Enter your address..." autocomplete="off">
                    <div id="suggestions" class="suggestions-list"></div>
                </div>
            </section>

            <!-- RESULTS SECTION -->
            <section id="results" class="results-section hidden">

                <!-- 1. PROPERTY TAX OVERVIEW (2025 vs 2026) -->
                <div class="card">
                    <div class="card-header">
                        <h2>Property Tax Overview</h2>
                    </div>
                    <div class="table-responsive">
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Year / Scenario</th>
                                    <th>Assessment</th>
                                    <th>Est. Tax</th>
                                    <th>Tax Rate</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>2025 (Actual)</strong></td>
                                    <td id="lblAssmt25">-</td>
                                    <td id="lblTax25">-</td>
                                    <td>2.501%</td>
                                </tr>
                                <tr class="danger-row">
                                    <td><strong>2026 (Base / No Vote)</strong></td>
                                    <td id="lblAssmt26">-</td>
                                    <td id="lblTax26No">-</td>
                                    <td>1.436% (Est.)</td>
                                </tr>
                                <tr class="highlight-row">
                                    <td><strong>2026 (With Yes Vote)</strong></td>
                                    <td id="lblAssmt26Yes">-</td>
                                    <td id="lblTax26Yes">-</td>
                                    <td>1.580% (Est.)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <p class="sub-text" style="text-align:center; margin-top:0.5rem;">
                        Impact of Vote: <span id="lblVoteCost" style="font-weight:700;">-</span> / year
                    </p>
                </div>

                <!-- 2. SCENARIO CONFIGURATION (Relief Inputs) -->
                <div class="card">
                    <div class="card-header">
                        <h2>Configure Your Scenario</h2>
                    </div>

                    <div class="relief-inputs">
                        <!-- Row 1: Filing Status & Income -->
                        <div class="input-group">
                            <label for="selFilingStatus">Filing Status</label>
                            <select id="selFilingStatus">
                                <option value="single">Single</option>
                                <option value="married_joint" selected>Married Filing Jointly</option>
                                <option value="married_separate">Married Filing Separately</option>
                                <option value="head_household">Head of Household</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="selIncome">2025 Household Income</label>
                            <select id="selIncome">
                                <option value="">Select Income...</option>
                                <option value="75000">Under $150,000</option>
                                <option value="160000">$150,000 - $172,475</option>
                                <option value="200000">$172,476 - $250,000</option>
                                <option value="350000">$250,001 - $500,000</option>
                                <option value="600000">Over $500,000</option>
                            </select>
                        </div>

                        <!-- Row 2: Age & Residency -->
                        <div class="input-group">
                            <label>Age & Residency</label>
                            <div class="checkbox-wrapper"
                                style="display:flex; flex-direction: column; gap:0.5rem; padding:0.5rem; border:1px solid var(--border); border-radius:8px; background:#fff;">
                                <label style="display:flex; align-items:center; gap:0.5rem; margin:0; font-weight:500;">
                                    <input type="checkbox" id="chkAge65" style="width:18px; height:18px;">
                                    I am 65 or older
                                </label>
                                <label style="display:flex; align-items:center; gap:0.5rem; margin:0; font-weight:500;">
                                    <input type="checkbox" id="chkYearsBase" style="width:18px; height:18px;">
                                    Lived here 3+ years
                                </label>
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Residency Status</label>
                            <div class="radio-group"
                                style="height: 100%; display: flex; flex-direction: column; justify-content: center; gap: 0.5rem;">
                                <label style="display:flex; align-items:center; gap:0.5rem;"><input type="radio"
                                        name="status" value="homeowner" checked> Homeowner</label>
                                <label style="display:flex; align-items:center; gap:0.5rem;"><input type="radio"
                                        name="status" value="renter"> Renter</label>
                            </div>
                        </div>

                        <!-- Row 3: Itemized Deductions (Optional) -->
                        <div class="input-group">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Deductible Mortgage
                                Interest ($)</label>
                            <!-- Use Flex for cleaner mobile layout if needed, but existing relative/absolute is standard. 
                                 The issue "looks funny" might be the spacing. Let's try a standard input group with prefix -->
                            <div class="relative rounded-md shadow-sm">
                                <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                                    <span class="text-gray-500 sm:text-sm"></span>
                                </div>
                                <input type="text" id="inputMortgage" placeholder="0"
                                    class="block w-full rounded-md border-gray-300 pl-7 p-2 focus:border-blue-500 focus:ring-blue-500 sm:text-sm">
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="inputCharity" class="block text-sm font-medium text-gray-700 mb-1">Charitable
                                and Other
                                Deductions ($)</label>
                            <div class="relative rounded-md shadow-sm">
                                <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                                    <span class="text-gray-500 sm:text-sm"></span>
                                </div>
                                <input type="text" id="inputCharity" placeholder="0" inputmode="numeric"
                                    class="block w-full rounded-md border-gray-300 pl-7 p-2 focus:border-blue-500 focus:ring-blue-500 sm:text-sm">
                            </div>
                        </div>

                        <!-- Row 4: Base Tax (Advanced) -->
                        <div class="input-group md:col-span-2">
                            <label for="inputBaseTax">Base Year Tax (For Senior Freeze) ($)</label>
                            <div class="relative rounded-md shadow-sm">
                                <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                                    <span class="text-gray-500 sm:text-sm"></span>
                                </div>
                                <input type="text" id="inputBaseTax" placeholder="0"
                                    class="block w-full rounded-md border-gray-300 pl-7 p-2 focus:border-blue-500 focus:ring-blue-500 sm:text-sm">
                            </div>
                            <small class="text-muted block mt-1">Only needed if applying for Senior Freeze
                                reimbursement.</small>
                        </div>
                    </div>



                    <!-- Relief Breakdown (Hidden until calc) -->
                    <div id="reliefBreakdown" class="hidden"
                        style="margin-top:1.5rem; border-top:1px solid var(--border); padding-top:1rem;">
                        <h3 style="font-size:1rem; margin-bottom:0.5rem;">Est. NJ Relief Programs</h3>
                        <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:0.5rem; text-align:center;">
                            <div class="mini-card">
                                <span>Anchor</span>
                                <strong id="valAnchor" style="display:block; color:#16a34a;">-</strong>
                                <small id="valAnchorDiff"
                                    style="display:block; font-size:0.75rem; color:#15803d;"></small>
                            </div>
                            <div class="mini-card">
                                <span>Senior Freeze</span>
                                <strong id="valFreeze" style="display:block; color:#16a34a;">-</strong>
                                <small id="valFreezeDiff"
                                    style="display:block; font-size:0.75rem; color:#15803d;"></small>
                            </div>
                            <div class="mini-card">
                                <span>Stay NJ</span>
                                <strong id="valStayNJ" style="display:block; color:#16a34a;">-</strong>
                                <small id="valStayNJDiff"
                                    style="display:block; font-size:0.75rem; color:#15803d;"></small>
                            </div>
                        </div>

                        <div
                            style="margin-top:0.75rem; padding:0.75rem; background:#f0fdf4; border:1px solid #bbf7d0; border-radius:6px; text-align:center;">
                            <span style="font-size:0.9rem; font-weight:600; color:#166534;">Total Est. Relief</span>
                            <strong id="valTotalRelief"
                                style="display:block; font-size:1.25rem; color:#16a34a;">-</strong>
                            <small id="valReliefDiff"
                                style="display:block; font-size:0.8rem; margin-top:2px; color:#15803d;">(vs 2025:
                                -)</small>
                        </div>

                        <div id="msgPas1" class="hidden"
                            style="margin-top:0.75rem; text-align:center; font-size:0.85rem; color:#1e40af; background:#eff6ff; padding:0.5rem; border-radius:6px; border:1px solid #bfdbfe;">
                            <strong>Eligible?</strong> You may need to file the
                            <a href="https://www.nj.gov/treasury/taxation/relief.shtml" target="_blank"
                                style="color:#1d4ed8; text-decoration:underline;">PAS-1 Form</a>
                            to claim these benefits.
                        </div>

                        <p class="sub-text" style="text-align:center; margin-top:0.5rem;" id="txtReliefNotes"></p>
                    </div>
                </div>

                <!-- 3. NET COST SUMMARY -->
                <div class="card summary-card" id="summaryCard">
                    <div class="card-header">
                        <h2>Net Cost Analysis</h2>
                    </div>

                    <div class="relief-inputs" style="margin-bottom: 1rem;">
                        <div>
                            <label
                                style="font-size: 0.9rem; font-weight: 500; display: block; margin-bottom: 0.25rem;">Est.
                                Fed Bracket</label>
                            <input type="text" id="displayFedBracket" readonly
                                style="width: 100%; padding: 0.5rem; border: 1px solid var(--border); border-radius: 6px; background: #f3f4f6; color: #4b5563;">
                        </div>
                        <div style="flex: 1;">
                            <label for="manualIncome"
                                style="font-size: 0.9rem; font-weight: 500; display: block; margin-bottom: 0.25rem;">Household
                                Income ($)</label>
                            <input type="text" id="manualIncome" placeholder="e.g. 150,000" inputmode="numeric"
                                style="width: 100%; padding: 0.5rem; border: 1px solid var(--border); border-radius: 6px;">
                            <input type="hidden" id="inputNJRate">
                        </div>
                    </div>

                    <div class="table-responsive">
                        <table class="summary-table">
                            <thead>
                                <tr>
                                    <th>Category</th>
                                    <th style="text-align:right;">2025 (Actual)</th>
                                    <th style="text-align:right;">2026 (No Vote)</th>
                                    <th style="text-align:right; color:#2563eb;">2026 (Yes Vote)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Total Property Tax</td>
                                    <td id="sumGrossTax25" style="text-align:right;">-</td>
                                    <td id="sumGrossTaxNo" style="text-align:right;">-</td>
                                    <td id="sumGrossTax" style="text-align:right;">-</td>
                                </tr>
                                <tr>
                                    <td>(-) Total NJ Relief Programs</td>
                                    <td id="sumNJRelief25" class="credit-text" style="text-align:right;">-</td>
                                    <td id="sumNJReliefNo" class="credit-text" style="text-align:right;">-</td>
                                    <td id="sumNJRelief" class="credit-text" style="text-align:right;">-</td>
                                </tr>
                                <tr class="subtotal-row">
                                    <td>Net Property Tax Paid</td>
                                    <td id="sumNetProp25" style="text-align:right;">-</td>
                                    <td id="sumNetPropNo" style="text-align:right; font-weight:600;">-</td>
                                    <td id="sumNetProp" style="text-align:right;">-</td>
                                </tr>
                                <tr>
                                    <td colspan="4" style="height:10px;"></td>
                                </tr>
                                <tr>
                                    <td style="color:var(--text-muted);">Est. NJ Income Tax (Info Only)</td>
                                    <td id="sumNJIncomeTax25"
                                        style="text-align:right; font-size:0.9rem; color:var(--text-muted);">-</td>
                                    <td id="sumNJIncomeTaxNo"
                                        style="text-align:right; font-size:0.9rem; color:var(--text-muted);">-</td>
                                    <td id="sumNJIncomeTax"
                                        style="text-align:right; font-size:0.9rem; color:var(--text-muted);">-</td>
                                </tr>
                                <tr>
                                    <td colspan="4" style="height:1px; background:var(--border); padding:0;">
                                    </td>
                                </tr>
                                <!-- Detailed Deduction Section -->
                                <tr>
                                    <td id="lblSaltDedRow" style="padding-left:1rem; color:var(--text-muted);">SALT
                                        Deduction</td>
                                    <td id="valSaltDed25" style="text-align:right; color:var(--text-muted);">-</td>
                                    <td id="valSaltDedNo" style="text-align:right; color:var(--text-muted);">-</td>
                                    <td id="valSaltDed" style="text-align:right; color:var(--text-muted);">-</td>
                                </tr>
                                <tr>
                                    <td style="padding-left:1rem; color:var(--text-muted);">Other Itemized
                                        (Mortg/Charity)</td>
                                    <td id="valOtherDed25" style="text-align:right; color:var(--text-muted);">-</td>
                                    <td id="valOtherDedNo" style="text-align:right; color:var(--text-muted);">-</td>
                                    <td id="valOtherDed" style="text-align:right; color:var(--text-muted);">-</td>
                                </tr>
                                <tr style="background-color: #f8fafc; font-weight:500;">
                                    <td style="padding-left:1rem; color:var(--text-muted);">Total Itemized</td>
                                    <td id="valTotalItemized25" style="text-align:right; color:var(--text-muted);">-
                                    </td>
                                    <td id="valTotalItemizedNo" style="text-align:right; color:var(--text-muted);">-
                                    </td>
                                    <td id="valTotalItemized" style="text-align:right; color:var(--text-muted);">-</td>
                                </tr>
                                <tr style="font-style: italic;">
                                    <td style="padding-left:1rem; color:var(--text-muted);">Standard Deduction
                                    </td>
                                    <td id="valStdDed25" style="text-align:right; color:var(--text-muted);">-</td>
                                    <td id="valStdDedNo" style="text-align:right; color:var(--text-muted);">-</td>
                                    <td id="valStdDed" style="text-align:right; color:var(--text-muted);">-</td>
                                </tr>
                                <tr style="background-color: #f9fafb; font-weight:600;">
                                    <td>
                                        Applied Federal Deduction
                                        <div style="font-size:0.75rem; font-weight:400;" id="lblDedType25">(Greater of
                                            Standard vs Itemized)</div>
                                    </td>
                                    <td id="sumDed25" style="text-align:right;">-</td>
                                    <td id="sumDedNo" style="text-align:right;">-</td>
                                    <td id="sumDed" style="text-align:right;">-</td>
                                </tr>
                                <tr>
                                    <td>
                                        (-) Value of Federal Deduction
                                        <div style="font-size:0.75rem; font-weight:400;" id="lblDedType25">(Property Tax
                                            Portion)</div>
                                    </td>
                                    <td id="sumFedBenefit25" class="credit-text" style="text-align:right;">-
                                    </td>
                                    <td id="sumFedBenefitNo" class="credit-text" style="text-align:right;">-
                                    </td>
                                    <td id="sumFedBenefit" class="credit-text" style="text-align:right;">-</td>
                                </tr>
                                <tr class="total-row">
                                    <td>Net Effective Property Tax</td>
                                    <td id="sumFinalCost25" style="text-align:right;">-</td>
                                    <td id="sumFinalCostNo" style="text-align:right;">-</td>
                                    <td id="sumFinalCost" style="text-align:right;">-</td>
                                </tr>
                                <tr style="font-size:0.9rem; border-top:1px solid var(--border);">
                                    <td style="padding-top:0.75rem; color:var(--text-muted);">Change vs 2025
                                    </td>
                                    <td style="text-align:right; padding-top:0.75rem; color:var(--text-muted);">
                                        -</td>
                                    <td id="sumChangeNo"
                                        style="text-align:right; font-weight:600; padding-top:0.75rem;">-
                                    </td>
                                    <td id="sumChangeYes"
                                        style="text-align:right; font-weight:600; padding-top:0.75rem;">-
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </section>
        </main>

        <footer>
            <p>Not an official municipal tool. For informational purposes only.</p>
            <p style="margin-top: 0.5rem; font-size: 0.8em; color: var(--text-muted);">
                Disclaimer: This tool provides estimates based on available data. It may not be accurate and should not
                be construed as tax advice. Please consult a qualified tax professional for personal financial guidance.
            </p>
            <p style="margin-top: 0.5rem; font-size: 0.8em;">
                <a href="privacy.html" style="color: var(--text-muted); text-decoration: underline;">Privacy Policy</a>
            </p>
        </footer>
    </div>
    <script src="assets/tax_logic.js"></script>
    <script src="app.js"></script>
</body>

</html>